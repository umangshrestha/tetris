(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{37:function(t,e,a){},38:function(t,e,a){},77:function(t,e,a){"use strict";a.r(e);var n=a(4),r=a.n(n),o=a(26),s=a.n(o),c=(a(37),a(5)),i=a(31),u=a(27),f=a(28),l=a(32),d=a(30),h=(a(38),-1),p=[[[[1,1,1,1]],[[1],[1],[1],[1]]],[[[1,1,1],[0,1,0]],[[1,0],[1,1],[1,0]],[[0,1,0],[1,1,1]],[[0,1],[1,1],[0,1]]],[[[1,1,1],[1,0,0]],[[1,0],[1,0],[1,1]],[[0,0,1],[1,1,1]],[[1,1],[0,1],[0,1]]],[[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]],[[0,1],[0,1],[1,1]]],[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]],[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],[[[1,1],[1,1]]]],b=function(){return Math.ceil((p.length-1)*Math.random())},P=function(t){var e=t.shapePos,a=t.rotatePos,n=t.xPos,r=t.yPos;return p[e][a].map((function(t,e){return t.map((function(t,a){return t?n+a+8*(e+r):h}))}))},v=function(){return{shapePos:b(),rotatePos:0,xPos:4,yPos:-3,board:Object(c.a)(Array(120)).map((function(t){return h})),speed:500,isPause:!1,score:0}},g=a(0),x=["black","pink","purple","green","brown","red","orange","blue"],m=function(t){return Object(g.jsx)("div",{style:(e=t.color+1,{height:"35px",width:"35px",borderStyle:"solid",borderWidth:"1px",color:"black",justifyContent:"center",backgroundColor:x[e]})});var e},y=a(29),j=a.n(y),k={width:"250px",height:"250px",margin:"0 auto",display:"grid",borderWidth:"10px",gridTemplate:"repeat(".concat(15,", 1fr) / repeat(").concat(8,", 1fr)")},O=function(t){var e=t.speed;return e-10*(e>10)},w=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).resetGame=function(){return n.setState(v())},n.shiftRight=function(t){var e=P(n.state),a=t?{deltaX:1,func:function(t){return Math.max.apply(null,t)},isEdge:n.state.xPos+e[0].length===8}:{deltaX:-1,func:function(t){return Math.min.apply(null,t)},isEdge:0===n.state.xPos},r=a.deltaX,o=a.func;if(!a.isEdge){var s=!1;e.forEach((function(t){var e=t.filter((function(t){return t!==h})),a=o(e)+r;n.state.board[a]!==h&&(s=!0)})),s||n.setState({xPos:n.state.xPos+r})}},n.rotateClockwise=function(t){var e=Object(i.a)({},n.state);e.rotatePos=function(t,e){var a=e.shapePos,n=e.rotatePos;return t?0===n?p[a].length-1:n-1:n===p[a].length-1?0:n+1}(t,n.state);var a=P(e),r=!1;a.forEach((function(t){var o=t.filter((function(t){return t!==h&&n.state.board[t]!==h}));console.log(t,o,r,e.xPos+a.length>8),(0!==o.length||e.xPos+a.length>=8)&&(r=!0)})),r||n.setState({rotatePos:e.rotatePos})},n.getNextBlock=function(){var t=P(n.state);n.updateBoard(n.state);for(var e=function(t){var e=Object(c.a)(Array(8)).map((function(e,a){return a+8*(n.state.yPos+t)}));if(8===e.map((function(t){return n.state.board[t]})).filter((function(t){return t!==h})).length){var a=Object(c.a)(n.state.board);e.forEach((function(t){return a[t]=h}));for(var r=e[0];r>0;r--)a[r]!==h&&(a[r+8]=a[r],a[r]=h);n.setState({board:a})}},a=0;a<t.length;a++)e(a);n.setState({shapePos:b(),speed:O(n.state),yPos:-3,xPos:4,rotatePos:0})},n.shiftDown=function(){var t=P(n.state);n.state.yPos+t.length>=15?n.getNextBlock():(t[0].forEach((function(e,a){var r=t.map((function(t){return t[a]===h?-1:t[a]+8})),o=Math.max.apply(Math,r);void 0===n.state.board[o]||n.state.board[o]===h||(n.state.yPos<=0&&-3!==n.state.yPos?(n.getNextBlock(),alert("Game Over"),n.resetGame()):n.getNextBlock())})),n.setState({yPos:n.state.yPos+1}))},n.updateBoard=function(t){var e=t.shapePos,a=Object(c.a)(n.state.board);P(n.state).forEach((function(t){return t.forEach((function(t){t!==h&&(a[t]=e)}))})),n.setState({board:a})},n.pauseGame=function(){return n.setState({isPause:!n.state.isPause})},n.keyInput=function(t){var e=t.keyCode;if(n.mutex.lock(),n.state.isPause)32===e&&n.pauseGame();else{switch(n.updateBoard({shapePos:h}),e){case 37:case 39:n.shiftRight(39===e);break;case 90:case 88:n.rotateClockwise(90===e);break;case 40:n.shiftDown();break;case 32:n.pauseGame()}n.updateBoard(n.state)}},n.state=v(),n.mutex=new j.a,n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.periodicInterval=setInterval((function(){t.mutex.lock(),t.state.isPause||(t.updateBoard({shapePos:h}),t.shiftDown(),t.updateBoard(t.state),t.setState({score:t.state.score+1}))}),this.state.speed),document.onkeydown=this.keyInput}},{key:"componentWillUnmount",value:function(){clearInterval(this.periodicInterval)}},{key:"render",value:function(){var t=this.state.board.map((function(t,e){return Object(g.jsx)(m,{name:e,color:t},e)}));return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("h1",{children:["  Tetris  ",this.state.score]}),Object(g.jsx)("p",{children:"  Right|Left|Down|Z|X|Space "}),Object(g.jsxs)("div",{style:k,children:[" ",t," "]})]})}}]),a}(n.Component),S=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,o=e.getLCP,s=e.getTTFB;a(t),n(t),r(t),o(t),s(t)}))};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(w,{})}),document.getElementById("root")),S()}},[[77,1,2]]]);
//# sourceMappingURL=main.e6abbd20.chunk.js.map